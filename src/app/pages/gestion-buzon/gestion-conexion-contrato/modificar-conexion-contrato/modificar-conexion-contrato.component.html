<app-operativa-header tituloPantalla="{{'GCO' | translate}}"></app-operativa-header>

<div id="modificarConexionContrato" class="panel panel-default col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <br>
    <div class="card">
        <h5 class="card-header justify-content-center">
             {{'pantalla.gestionValidacion.seccionBusqueda.title' | translate}}
        </h5>
        <div class="card-body">
            <form [formGroup]="gestionConexionContratoForm">
                <div class="row justify-content-center">
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group row">
                            <label for="numeroContrato" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1 col-form-label text-right mt-1">{{'pantalla.gestionBuzon.numeroContrato'| translate}}:</label>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <input class="form-control" id="numeroContrato"  type="text" name="numeroContrato" formControlName="numeroContrato"
                               > 

                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group row">
                            <label for="codigoCliente" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1 col-form-label text-right mt-1">{{'pantalla.gestionBuzon.codigoCliente'| translate}}:</label>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <input class="form-control" id="codigoCliente"  type="text" name="codigoCliente" formControlName="codigoCliente"> 
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="row mt-2">
                <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                    <button type="button" class="btn btn-danger" (click)="regresar()">{{'btn.regresar' |
                        translate}}</button>
                </div>
                <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
                    <button type="button" class="btn btn-danger" (click)="agregarParametros()" >{{'btn.agregar' |
                        translate}}</button>
                </div>
            </div>
        </div>
    </div>

    <ng-container *ngIf="protocolos">
        <div class="card my-1">
            <h5 class="card-header justify-content-center">
                {{ nombre }}
            </h5>
            <div class="card-body">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                       <table class="table table-striped table-hover">
                        <caption></caption>
                            <thead>
                                <tr>
                                    <th class="text-center" scope="col">{{'pantalla.gestionParametrosCanal.activo' | translate}}</th>
                                    <th class="text-center" scope="col">{{'pantalla.gestionParametrosCanal.tipoProcesamiento' | translate}}</th>
                                    <th class="text-center" scope="col" *ngFor="let param of conexionProtocolos.parametros; index as i">
                                        {{ param }}
                                    </th>
                                    <th class="text-center" scope="col">{{'btn.modificar' | translate}}</th>
                                </tr>
                            </thead>
                            <tbody *ngFor="let protocol of protocolos; index as x">
                                <tr *ngIf="protocol.parametrosGet && protocol.parametrosGet.length > 0">
                                    <td class="text-center">
                                        <label for="che1"></label>
                                        <input type="checkbox" id="che1" (click)="check(protocol.parametrosGet[x], conexionProtocolos, $event)" [checked]="protocol.parametrosGet[0].estadoValor === 'A'">
                                    </td>
                                    <td class="text-center">GET</td>
                                    <td class="text-center td-value" *ngFor="let param of protocol.nombreParametros; index as i">
                                        <ng-container *ngIf="protocol.parametrosGet[i]">
                                            {{ protocol.parametrosGet[i].valorParametro }}
                                        </ng-container>
                                    </td>
                                    <td>
                                        <br>
                                    </td>
                                   
                                </tr>
                                <tr *ngIf="protocol.parametrosPut && protocol.parametrosPut.length > 0">
                                    <td class="text-center">
                                        <label for="che"></label>
                                        <input type="checkbox" id="che" (click)="check(protocol.parametrosPut[x],conexionProtocolos, $event)"  [checked]="protocol.parametrosPut[0].estadoValor === 'A'">
                                    </td>
                                    <td class="text-center">PUT</td>
                                    <td class="text-center td-value" *ngFor="let param of protocol.nombreParametros; index as i">
                                        <ng-container *ngIf="protocol.parametrosPut[i]">
                                            {{ protocol.parametrosPut[i].valorParametro }}
                                        </ng-container>
                                    </td>
                                    <td class="text-center">
                                        <button type="button" class="btn btn-outline-danger" (click)="modificarParametros(protocol)">
                                            {{'btn.modificar' | translate}}
                                        </button>
                                    </td>
                                </tr>
                                <div class="spa"></div>
                            </tbody>
                            
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
</div>