<app-operativa-header tituloPantalla="{{'menu.gestionBuzon.gestionParametrosCanal' | translate}}"></app-operativa-header>

<div id="modificarConexionContrato" class="panel panel-default col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <br>
    <div class="card">
        <h5 class="card-header justify-content-center">
            {{'pantalla.gestionParametrosCanal.datosCanal' | translate}}
        </h5>
        <div class="card-body">
            <form>
                <div class="row justify-content-center">
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group row">
                            <label for="name" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1 col-form-label text-right mt-1">{{'pantalla.gestionParametrosCanal.nombre' | translate}}:</label>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <input class="form-control" id="name" type="text" [value]="name" disabled> 
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group row">
                            <label for="description" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1 col-form-label text-right mt-1">{{'pantalla.gestionParametrosCanal.descCanal' | translate}}:</label>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <input class="form-control" id="description" type="text" [value]="description" disabled> 
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="row mt-2">
                <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                    <button type="button" class="btn btn-danger" (click)="back()">{{'btn.regresar' | translate}}</button>
                </div>
                <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
                    <button type="button" class="btn btn-danger" (click)="addParams()" >{{'btn.agregar' | translate}}</button>
                </div>
            </div>
        </div>
    </div>

    <ng-container *ngIf="protocols">
        <div class="card my-1" *ngFor="let protocol of protocols">
            <h5 class="card-header justify-content-center">
                {{ protocol.name }}
            </h5>
            <div class="card-body overflow-auto">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                       <table class="table table-striped table-hover">
                        <caption></caption>
                            <thead>
                                <tr>
                                    <th class="text-center" scope="col">{{'pantalla.gestionParametrosCanal.activo' | translate}}</th>
                                    <th class="text-center" scope="col">{{'pantalla.gestionParametrosCanal.tipoProcesamiento' | translate}}</th>
                                    <th class="text-center" scope="col" *ngFor="let param of protocol.paramNames">
                                        {{ param }}
                                    </th>
                                    <th class="text-center" scope="col">{{'btn.modificar' | translate}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let reg of regs">
                                    <tr *ngIf="reg.paramsGet && reg.paramsGet.length > 0">
                                        <td class="text-center">
                                            <label for="chee"></label>
                                            <input type="checkbox" id="chee"
                                                [disabled]="!reg.paramsGet"
                                                [checked]="reg.paramsGet && reg.paramsGet[0].patternStatus === 'A'"
                                                (click)="updateParramStatus(reg.paramsGet[0], $event)">
                                        </td>
                                        <td class="text-center">GET</td>
                                        <td class="text-center td-value" *ngFor="let param of protocol.paramNames; index as i">
                                            <ng-container *ngIf="reg.paramsGet[i]">
                                                {{ reg.paramsGet[i].patternValue }}
                                            </ng-container>
                                        </td>
                                        <td class="text-center" rowspan="2">
                                            <button type="button" class="btn btn-outline-danger" (click)="editParams(reg.idReg)">
                                                {{'btn.modificar' | translate}}
                                            </button>
                                        </td>
                                    </tr>
                                    <tr *ngIf="reg.paramsPut && reg.paramsPut.length > 0">
                                        <td class="text-center">
                                            <label for="che"></label>
                                            <input type="checkbox" id="che"
                                                [disabled]="!reg.paramsPut"
                                                [checked]="reg.paramsPut && reg.paramsPut[0].patternStatus === 'A'"
                                                (click)="updateParramStatus(reg.paramsPut[0], $event)">
                                        </td>
                                        <td class="text-center">PUT</td>
                                        <td class="text-center td-value" *ngFor="let param of protocol.paramNames; index as i">
                                            <ng-container *ngIf="reg.paramsPut[i]">
                                                {{ reg.paramsPut[i].patternValue }}
                                            </ng-container>
                                        </td>
                                        <td [style.display]="'none'">
                                        </td>
                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>

</div>
