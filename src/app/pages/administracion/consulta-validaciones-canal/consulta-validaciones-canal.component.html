<app-operativa-header
  tituloPantalla="{{
    'menu.moduloAdministracion.consultaValidacionesCanal' | translate
  }}"
></app-operativa-header>
<div
  id="consultaValidacionesCanal"
  class="panel panel-default col-xs-12 col-sm-12 col-md-12 col-lg-12"
>
  <br />
  <div class="card">
    <form [formGroup]="consultaValidacionesForm">
      <h5 class="card-header justify-content-center">
        {{ "pantalla.gestionValidacion.seccionBusqueda.title" | translate }}
      </h5>
      <div class="card-body">
        <div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div
              class="form-group row justify-content-center align-items-center"
            >
              <label
                for="selectProducto"
                class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-form-label"
                >{{
                  "pantallas.monitorOperacionesOnline.producto" | translate
                }}</label
              >
              <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <select
                  class="form-control"
                  id="selectProducto"
                  formControlName="producto"
                  (change)="getLayouts()"
                >
                  <option value="">{{'seleccione' | translate}}</option>
                  <option
                    [value]="item.idCatalogo"
                    *ngFor="let item of catProductos"
                  >
                    {{ item?.descripcionCatalogo }}
                  </option>
                </select>
              </div>
            </div>
          </div>

          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div
              class="form-group row justify-content-center align-items-center"
            >
              <label
                for="selectLayout1"
                class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-form-label"
                >{{
                  "menu.moduloAdministracion.creacionLayouts.layout"
                    | translate
                }}:</label
              >
              <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <select
                  class="form-control"
                  id="selectLayout1"
                  formControlName="layout"
                  (change)="getFieldNumber()"
                >
                  <option value="">{{'seleccione' | translate}}</option>
                  <option
                    [value]="item.idCatalogo"
                    *ngFor="let item of catLayout"
                  >
                    {{ item?.descripcionCatalogo }}
                  </option>
                  >
                </select>
              </div>
            </div>
          </div>

          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div
              class="form-group row justify-content-center align-items-center"
            >
              <label
                for="selectnumCampo"
                class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-form-label"
                >{{
                  "pantalla.gestionBuzon.consultaValidacionesCanal" | translate
                }}:</label
              >
              <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <select
                  class="form-control"
                  id="selectnumCampo"
                  name="selectnumCampo"
                  formControlName="numCampo"
                >
                  <option value="">{{'seleccione' | translate}}</option>
                  <option
                    [value]="item.descripcionCatalogo"
                    *ngFor="let item of catNumCampo"
                  >
                    {{ item?.descripcionCatalogo }}
                  </option>
                  >
                </select>
              </div>
            </div>
          </div>

          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div
              class="form-group row justify-content-center align-items-center"
            >
              <label
                for="selectnombreCampo"
                class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-form-label"
                >{{ "pantalla.gestionBuzon.nombreCampo" | translate }}:</label
              >
              <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <select
                  class="form-control"
                  id="selectnombreCampo"
                  name="selectnombreCampo"
                  formControlName="nombreCampo"
                >
                  <option value="">{{'seleccione' | translate}}</option>
                  <option
                    [value]="item.descripcionCatalogo"
                    *ngFor="let item of catNombreCampo"
                  >
                    {{ item?.descripcionCatalogo }}
                  </option>
                  >
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div
            class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1"
          >
            <button type="button" class="btn btn-danger" (click)="eventClean()">
              {{ "btn.limpiar" | translate }}
            </button>
          </div>
          <div
            class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8"
          >
            <button
              type="button"
              class="btn btn-danger"
              (click)="eventoConsultar()"
            >
              {{ "btn.buscar" | translate }}
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>

  <ng-container *ngIf="tabla.length > 0">
    <div class="card mt-2">
      <h5 class="card-header justify-content-center">
        {{ "gestionValidaciones.general.gestionValidaciones.validacionesCanal" | translate }}
      </h5>
      <div class="card-body">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <table
              class="table table-striped table-hover"
              aria-describedby="listConsultCanal"
            >
              <thead>
                <tr>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.numero"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.campo"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.gestionValidacionesCanal.descripcion"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.tipo"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.gestionValidacionesCanal.inicio"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.final"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.validacion"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.descripcionValidacion"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.codigoBack"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.codigoCCBN"
                    }}
                  </th>
                  <th class="text-center" scope="col" translate>
                    {{
                      "pantalla.moduloAdministracion.consultaValidacionesCanal.mensaje"
                    }}
                  </th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngIf="banderaHasRows" #templateFillTable>
                  <tr *ngFor="let canal of tabla">
                    <td>{{ canal.numero }}</td>
                    <td>{{ canal.campo }}</td>
                    <td>{{ canal.descripcion }}</td>
                    <td>{{ canal.tipo }}</td>
                    <td>{{ canal.pscInicio }}</td>
                    <td>{{ canal.pscFin }}</td>
                    <td>{{ canal.validacion }}</td>
                    <td>{{ canal.descValidacion }}</td>
                    <td>{{ canal.codigoBack }}</td>
                    <td>{{ canal.codigoCcbn }}</td>
                    <td>{{ canal.mensaje }}</td>
                  </tr>
                </ng-container>
                <ng-container *ngIf="!banderaHasRows" #templateEmptyTable>
                  <tr>
                    <td class="text-center" colspan="12">
                      {{'noResult' | translate}}
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-1">
            <div class="d-flex justify-content-center" *ngIf="banderaHasRows">
              <pagination
                [maxSize]="20"
                [totalItems]="totalElements"
                [itemsPerPage]="rowsPorPagina"
                [(ngModel)]="page"
                previousText="&lsaquo;"
                nextText="&rsaquo;"
                firstText="{{'paginador.inicio' | translate}}"
                lastText="{{'paginador.fin' | translate}}"
                (pageChanged)="onPageChanged($event)"
              >
              </pagination>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-2">
      <div
        class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-10 offset-sm-10 offset-md-10 offset-lg-10"
      >
        <button
          type="button"
          class="btn btn-danger mb-5"
          [disabled]="!banderaHasRows"
          (click)="openModal()"
        >
          {{ "btn.exportar" | translate }}
        </button>
      </div>
    </div>
  </ng-container>
</div>
