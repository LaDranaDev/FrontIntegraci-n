<app-operativa-header tituloPantalla="{{'pantalla.catalogoDin.consultar.titulo' | translate}}"></app-operativa-header>
<div id="catalogoDinamico" class="panel panel-default col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <br>
    <div class="card">
        <h5 class="card-header justify-content-center">
            {{'pantalla.catalogoDin.consultar.titulo' | translate}}
        </h5>
        <div class="card-body">
            <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group row">
                        <div class="col-sm-12">
                            <select class="form-control" name="selectCatalogo" id="selectCatalogo"
                                [(ngModel)]="idSelectCatalogo" (change)="onChangeSelect($event)"
                                aria-label="selectCatalogo">
                                <option value=""> {{'pantalla.gestionAlarma.seccionResultado.tabla.seleccionar' | translate }}</option>
                                <option *ngFor="let catalogo of listFillSelectCatalogos" [value]="catalogo['id']">
                                    {{catalogo['descripcion']}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6">
                    <form [formGroup]="formCatalogoDinamico" autocomplete="off">
                        <div class="form-group row">
                            <label for="inputDescripcion"
                                class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-form-label text-right mt-1">{{'pantalla.catalogoDin.descripcion'
                                | translate}}</label>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <input type="text" class="form-control removeTextTransform" id="inputDescripcion"
                                    name="v_Descripcion" [(ngModel)]="descripcionCatalogo"
                                    (keypress)="eveValidateTextoDescripcion($event)"
                                    (paste)="eventoPaste($event)"
                                    formControlName="descripcion" maxlength="50" size="30">
                            </div>
                        </div>
                        <div class="form-group row align-items-center">
                            <label for="inputEstatus"
                                class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-form-label text-right">{{'pantalla.catalogoDin.estatus'
                                | translate}}:</label>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <input type="checkbox" name="inputEstatus" id="inputEstatus" aria-label="inputEstatus"
                                    [checked]="bandaEstatusCatalogo === 'A' ? true : false" value="A"
                                    formControlName="estatus" (change)="onChangeStatusCat($event)">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-2 mb-2">
                    <button type="button" class="btn btn-danger" (click)="guardarCatalogo()">{{'btn.guardar' |
                        translate}}</button>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <button type="button" class="btn btn-danger" (click)="actualizarCatalogo()">{{'btn.modificar' |
                        translate}}</button>
                </div>
            </div>
        </div>
    </div>
    <div class="card mt-2">
        <h5 class="card-header justify-content-center">
        </h5>
        <div class="card-body">
            <div class="row table-responsive">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <table class="table table-striped table-hover"
                        aria-describedby="listConsultCatalogoDinamicoInformacion">
                        <thead>
                            <tr>
                                <th class="text-center" scope="col"></th>
                                <th class="text-center" scope="col">{{'pantalla.catalogoDin.valor' | translate}}</th>
                                <th class="text-center" scope="col">{{'pantalla.catalogoDin.descripcionsinpuntos' | translate}}
                                </th>
                                <th class="text-center" scope="col">{{'pantalla.catalogoDin.estatus' | translate}}</th>
                                <th class="text-center" scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngIf="banderaHasRows; then templateFillTable; else templateEmptyTable">
                            </ng-container>
                            <ng-template #templateFillTable>
                                <tr *ngFor="let subCatalogo of listFillTableSubCatalogos">
                                    <td class="text-center">
                                        <input type="radio" class="option-input radio" name="deleteSubCatalogo"
                                            id="subCatalogo.idReg" (click)="onEventClickRadioButton(subCatalogo.idReg)"
                                            aria-label="deleteSubCatalogo">
                                    </td>
                                    <td class="text-center">{{subCatalogo.valor}}</td>
                                    <td class="text-center">{{subCatalogo.descr}}</td>
                                    <ng-container
                                        *ngIf="subCatalogo.bandModifica === 'I'; then templateDisabled; else templateEnabled">
                                    </ng-container>
                                    <ng-template #templateDisabled>
                                        <td class="text-center">
                                            <input type="checkbox" name="estatusBanda" aria-label="estatusBanda"
                                                [checked]="subCatalogo.bandAct === 'A' ? true : false" disabled>
                                        </td>
                                        <td class="text-center">
                                            <button type="button" class="btn btn-outline-danger"
                                                (click)="editSubCatalogo(subCatalogo)" disabled>{{'btn.modificar' |
                                                translate}}</button>
                                        </td>
                                    </ng-template>
                                    <ng-template #templateEnabled>
                                        <td class="text-center">
                                            <input type="checkbox" name="estatusBanda" aria-label="estatusBanda"
                                                [checked]="subCatalogo.bandAct === 'A' ? true : false"
                                                (change)="onChangeStatusSubCat(subCatalogo, $event)">
                                        </td>
                                        <td class="text-center">
                                            <button type="button" class="btn btn-outline-danger"
                                                (click)="editSubCatalogo(subCatalogo)">{{'btn.modificar' |
                                                translate}}</button>
                                        </td>
                                    </ng-template>
                                </tr>
                            </ng-template>
                            <ng-template #templateEmptyTable>
                            </ng-template>
                        </tbody>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-1">
                    <div class="d-flex justify-content-center" *ngIf="banderaHasRows">
                        <pagination [maxSize]="rowsPage" [boundaryLinks]="showBoundaryLinks"
                            [directionLinks]="showDirectionLinks" [totalItems]="totalElements" [itemsPerPage]="rowsPage"
                            [(ngModel)]="page" previousText="&lsaquo;" nextText="&rsaquo;" firstText="{{'paginador.inicio' | translate}}"
                            lastText="{{'paginador.fin' | translate}}" (pageChanged)="onPageChanged($event)">
                        </pagination>
                    </div>
                </div>
            </div>
            <ng-container *ngIf="banderaHasRows; then templateShowButtons; else templateHideButtons">
            </ng-container>
            <ng-template #templateShowButtons>
                <div class="row mt-2">
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                        <button type="button" class="btn btn-danger" (click)="addSubCatalogo()">{{'btn.agregar' |
                            translate}}</button>
                    </div>
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
                        <button type="button" class="btn btn-danger" (click)="openModalConfEliminar()">{{'btn.eliminar'
                            | translate}}</button>
                    </div>
                </div>
                <div class="row mt-2">
                    <div
                        class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-10 offset-sm-10 offset-md-10 offset-lg-10">
                        <button type="button" class="btn btn-danger" (click)="openModalExportacion()">{{'btn.exportar' |
                            translate}}</button>
                    </div>
                </div>
            </ng-template>
            <ng-template #templateHideButtons>
            </ng-template>
            <ng-container
                *ngIf="banderaShowButtonsAgregarSubCat; then templateShowButtonsAgregarSubCat; else templateHideButtonsAgregarSubCar">
            </ng-container>
            <ng-template #templateShowButtonsAgregarSubCat>
                <div class="row mt-2">
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                        <button type="button" class="btn btn-danger" (click)="addSubCatalogo()">{{'btn.agregar' |
                            translate}}</button>
                    </div>
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
                        <button type="button" class="btn btn-danger" (click)="openModalConfEliminar()">{{'btn.eliminar'
                            | translate}}</button>
                    </div>
                </div>
            </ng-template>
            <ng-template #templateHideButtonsAgregarSubCar>
            </ng-template>


        </div>
    </div>
    <br />
</div>