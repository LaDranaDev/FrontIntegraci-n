<app-operativa-header
    tituloPantalla="{{'administracionStockSuperCuentaGo1' | translate}}"></app-operativa-header>

<div id="Go" class="panel panel-default col-xs-12 col-sm-12 col-md-12 col-lg-12">

    <div class="card">
        <h5 class="card-header justify-content-center">
        </h5>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group row">
                        <label for="codCliente" class="col-form-label col-sm-3">{{'codigoCliente' | translate}}:</label>
                        <div class="col-sm-4">
                            <input type="text" id="codCliente" name="codCliente" class="form-control"
                                placeholder="{{'pantalla.altaContratos.datosContrato.codCliente' | translate}}"
                                maxlength="8" size="12" (keypress)="validateOnlyNumeros($event)"
                                (blur)="validateTamanoBuc($event)" (paste)="pasteOnlyNumeros($event)"
                                (input) = "limpiaFormulario()"
                                (keydown.Tab)="getContratoByBuc()" [(ngModel)]="datospersonales.bucCliente">
                        </div>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group row">
                        <label for="estatusContrato" class="col-form-label col-sm-3">{{'estatusContrato' | translate}}:</label>
                        <div class="col-sm-4">
                            <input type="text" id="estatusContrato" name="estatusContrato" class="form-control"
                            maxlength="50" size="72" [(ngModel)]="datospersonales.descEstatus" disabled>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-md-6">
                    <div class="form-group row">
                        <label for="razonSocial9" class="col-form-label col-sm-3">{{'razonSocial' | translate}}:</label>
                        <div class="col-sm-9">
                            <input type="text" id="razonSocial9" name="razonSocial" class="form-control"
                                placeholder="{{'pantalla.altaContratos.datosContrato.razonSocial' | translate}}"
                                maxlength="50" size="72" [(ngModel)]="datospersonales.razonSocial" disabled>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group row">
                        <label for="cuentaEje9" class="col-form-label col-sm-3">{{'pantalla.datosContrato.cuentaEje' |
                            translate}}:</label>
                        <div class="col-sm-4">
                            <input type="text" id="cuentaEje9" name="cuentaEje" class="form-control"
                                [(ngModel)]="datospersonales.cuentaEje"
                                placeholder="{{'pantalla.altaContratos.datosContrato.cuentaEje' | translate}}"
                                maxlength="11" size="20" disabled>
                        </div>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group row">
                        <label for="numContrato9" class="col-form-label col-sm-3">{{'numContrato' | translate}}:</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" name="numContrato" id="numContrato9"
                                [(ngModel)]="datospersonales.numContrato" placeholder="{{'numContrato' | translate}}"
                                maxlength="12" size="20" disabled>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>

    <div class="card">
        <h5 class="card-header justify-content-center">
            {{'pantalla.gestionValidacion.seccionBusqueda.title' | translate}}
        </h5>

        <br>
        <form [formGroup]="monitorSaldosForm">
            <div class="card-body">
                <div class="row">
                    <div class="col-xs-4 col-sm-4 col-md-4">
                        <div class="form-group row">
                            <label for="estatus" class="col-form-label col-md-4 col-xs-4 col-xs-4 col-sm-4">{{'administracionStockSuperCuentaGo.stRemesa' | translate}}:</label>
                            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                <select class="form-control" id="estatus" name="estatus" formControlName="tipoFecha">
                                    <option value="" [defaultSelected]=""></option>
                                    <option *ngFor="let estatus of select" [value]="estatus.id">
                                        {{ estatus.value }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-4 col-sm-4 col-md-4">
                        <div class="form-group row">
                            <label for="inputFechaInicial" class="col-form-label col-md-4 col-xs-4 col-xs-4 col-sm-4">{{'fechaInicial' | translate}}:</label>
                            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="inputFechaInicial" name="v_fechaInicial"
                                        readonly required bsDatepicker #dpFechaIni="bsDatepicker"
                                        [bsConfig]="datePickerConfig" formControlName="fechaInicial"
                                        [maxDate]="getMaxDate()">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-danger" type="button" id="btnFechaInicio"
                                            name="btnFechaInicio" (click)="dpFechaIni.toggle()"
                                            [attr.aria-expanded]="dpFechaIni.isOpen"
                                            [disabled]="!datospersonales.bucCliente">
                                            <em class="fa fa-calendar"></em>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-4 col-sm-4 col-md-4">
                        <div class="form-group row">
                            <label for="fechaFinal" class="col-form-label col-md-4 col-xs-4 col-xs-4 col-sm-4">{{'fechaFinal' | translate}}:</label>
                            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="fechaFinal" name="v_fechaFinal" readonly
                                        required bsDatepicker #dpFechaFin="bsDatepicker" [bsConfig]="datePickerConfig"
                                        formControlName="fechaFinal" [maxDate]="getMaxDate()">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-danger" type="button" id="btnFechaFin"
                                            name="btnFechaFin" (click)="dpFechaFin.toggle()"
                                            [attr.aria-expanded]="dpFechaFin.isOpen"
                                            [disabled]="!datospersonales.bucCliente">
                                            <em class="fa fa-calendar"></em>
                                        </button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-body">
                <div class="row">
                    <div class="col-xs-4 col-sm-4 col-md-4">
                        <div class="form-group row">
                            <label for="numRemesa" class="col-form-label col-md-4 col-xs-4 col-xs-4 col-sm-4">{{'administracionStockSuperCuentaGo.ramesa' | translate}}:</label>
                            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                <input type="text" id="numRemesa" name="numRemesa" class="form-control"
                                    formControlName="ramesa">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-2">
                <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                    <button type="button" class="btn btn-danger" (click)="limpiar()">{{'btn.limpiar' |
                        translate}}</button>
                </div>
                <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
                    <button type="button" class="btn btn-danger" (click)="consultar()">{{'btn.consultar' |
                        translate}}</button>
                </div>
            </div>

        </form>
    </div>

    <div *ngIf="consulta === true" class="card">
        <h5 class="card-header justify-content-center">
            Consulta Stock SÃºper Cuenta Go
        </h5>

        <div class="card my-1" *ngIf="banderaHasRows">
            <div class="card-body">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <table class="table table-striped table-hover" aria-describedby="cancelarOperaciones">
                            <thead>
                                <tr>
                                    <th class="text-center" scope="col"></th>
                                    <th class="text-center" scope="col">{{'adminStock.no.remesa' | translate}}</th>
                                    <th class="text-center" scope="col">{{'consultaDocumentosCFDI.lblEstatus' | translate}}</th>
                                    <th class="text-center" scope="col">{{"admonSprCtaGo.fecha.envio" | translate}}</th>
                                    <th class="text-center" scope="col">{{"admonSprCtaGo.fecha.recepcion" | translate}}</th>
                                    <th class="text-center" scope="col">{{"admonSprCtaGo.fecha.cancelacion" | translate}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngIf="banderaHasRows; then templateFillTable; else templateEmptyTable">
                                </ng-container>
                                <ng-template #templateFillTable>
                                    <tr *ngFor="let registro of tabla">
                                        <td class="text-center">
                                            <div *ngIf="(registro.estadoRemesa==='RECIBIDA' || registro.estadoRemesa==='ENVIADA')">
                                                <mat-radio-group name="opcLst">
                                                    <mat-radio-button 
                                                        (click)="onEventClickRadioButton(registro.numRemesa, registro.centroDistribucion)" 
                                                        value="{{registro.numRemesa}}"></mat-radio-button>
                                                </mat-radio-group>
                                            </div>
                                        </td>
                                        <td class="text-center link" (click)="tarjetas(registro)">{{registro.numRemesa}}</td>
                                        <td class="text-center">{{registro.estadoRemesa}}</td>
                                        <td class="text-center">{{registro.fechaAltaRem}}</td>
                                        <td class="text-center">{{registro.fechaRecepRem}}</td>
                                        <td class="text-center">{{registro.fechaBajaRem}}</td>
                                    </tr>
                                </ng-template>
                                <ng-template #templateEmptyTable>
                                    <tr>
                                        <td class="text-center" colspan="12"> No se encontraron resultados </td>
                                    </tr>
                                </ng-template>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-1">
                        <div class="d-flex justify-content-center" *ngIf="banderaHasRows">
                            <pagination [boundaryLinks]="showBoundaryLinksR" [directionLinks]="showDirectionLinksR"
                                [totalItems]="totalElementsR" [itemsPerPage]="rowsPorPaginaR" [maxSize]="rowsPorPaginaR"
                                [(ngModel)]="pageR" previousText="&lsaquo;" nextText="&rsaquo;"
                                firstText="{{ 'paginador.inicio' | translate }}"
                                lastText="{{ 'paginador.fin' | translate }}" (pageChanged)="onPageChanged($event)">
                            </pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-2">
            <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                <button type="button" class="btn btn-danger" (click)="aceptRemesa()">{{'btn.aceptar' | translate}}</button>
            </div>
            <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
                <button type="button" class="btn btn-danger" (click)="openModal()">{{'btn.exportar' |
                    translate}}</button>
            </div>
        </div>
        <div class="row mt-2" *ngIf="banderaHasRows">
            <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                <button type="button" class="btn btn-danger" (click)="cancelRemesa()">{{'btn.cancelar' | translate}}</button>
            </div>
            <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
            </div>
        </div>
    </div>

</div>