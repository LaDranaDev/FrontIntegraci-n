<app-operativa-header tituloPantalla="{{ 'operativo.ConsolClienOpe' | translate }}"></app-operativa-header>
<div id="consultaValidacionesCanal" class="panel panel-default col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <br />
  <div class="card" [hidden]="showGraphByYear || showGraphDetail">
    <h5 class="card-header justify-content-center">
      {{ "pantalla.gestionValidacion.seccionBusqueda.title" | translate }}
    </h5>
    <div class="card-body">
      <form>
        <!-- Form search -->
        <div class="row">
          <div class="col-sm-12 col-md-6 text-center">
            <div class="form-check form-check-inline">
              <label class="form-check-label margin-right-custom" for="top">{{
                "operativo.top10" | translate
                }}</label>
              <input type="radio" class="ml-5" id="actualYear" name="actualYear"
                (click)="filtetByCurrentYear = 'current'"
                [checked]="filtetByCurrentYear === 'current' ? true : false" />
              <label class="form-check-label" for="actualYear">{{
                "operativo.anoActual" | translate
                }}</label>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="form-check form-check-inline">
              <input type="radio" class="ml-5" name="pastYear" id="pastYear" (click)="filtetByCurrentYear = 'last'"
                [checked]="filtetByCurrentYear === 'last' ? true : false" />
              <label class="form-check-label" for="pastYear">{{
                "operativo.anoAnterior" | translate
                }}</label>
            </div>
          </div>
        </div>
      </form>

      <!-- Buttons search, clear -->
      <div class="row mt-5">
        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
          <button type="button" class="btn btn-danger" (click)="clean()">
            {{ "btn.limpiar" | translate }}
          </button>
        </div>
        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
          <button type="button" class="btn btn-danger" (click)="search()">
            {{ "btn.buscar" | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Grap by year -->
  <div class="card mt-3" [hidden]="!showGraphByYear || showGraphDetail">
    <div class="card-body">
      <div class="row">
        <!-- Table -->
        <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5">
          <table class="table table-striped table-hover">
            <caption></caption>
            <thead>
              <tr>
                <th scope="col" class="text-center">
                  {{ "pantallas.monitorizacion.Fecha" | translate }}
                </th>
                <th scope="col" class="text-center">
                  {{
                  "pantalla.controlVolumenOperativo.graficaArchivoCliente.operaciones"
                  | translate
                  }}
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let operacion of operaciones">
                <td class="text-center tablePointer" (click)="searchDetail(operacion.fecha)">{{ operacion.fecha || '--' }}</td>
                <td class="text-center">{{ operacion.totalOperaciones || '--' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Graph -->
        <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7">
          <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center text-uppercase">
              <h2>{{titleGraph}}</h2>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
              <canvas class="canvas-size" id="chartConsolidadoHistorico"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
          <button type="button" class="btn btn-danger" (click)="back(false)">
            {{ "btn.regresar" | translate }}
          </button>
        </div>
        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
          <button type="button" class="btn btn-danger" (click)="exportarHistorico()">
            {{ "btn.exportar" | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Detail graph -->
  <div class="card mt-3" [hidden]="showGraphByYear || !showGraphDetail">
    <div class="card-body">
      <div class="row">
        <!-- Table -->
        <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5">
          <table class="table table-striped table-hover">
            <caption></caption>
            <thead>
              <tr>
                <th scope="col" class="text-center">
                  {{ "MO.N" | translate }}
                </th>
                <th scope="col" class="text-center">
                  {{
                  "producto"
                  | translate
                  }}
                </th>
                <th scope="col" class="text-center">
                  {{
                  "TT"
                  | translate
                  }}
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let operacion of historicoOperaciones">
                <td class="text-center col-4">{{ operacion.nombre || '--' }}</td>
                <td class="text-center col-4">{{ operacion.nombreProducto || '--' }}</td>
                <td class="text-center col-4">{{ operacion.totalOperaciones || '--' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Graph -->
        <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7">
          <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center text-uppercase">
              <h2>{{'operativo.nombreGrafica' | translate}}</h2>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
              <canvas class="canvas-size" id="chartConsolidadoHistoricoDetail"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
          <button type="button" class="btn btn-danger" (click)="back(true)">
            {{ "btn.regresar" | translate }}
          </button>
        </div>
        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-8 offset-sm-8 offset-md-8 offset-lg-8">
          <button type="button" class="btn btn-danger" (click)="exportarDetalle()">
            {{ "btn.exportar" | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
