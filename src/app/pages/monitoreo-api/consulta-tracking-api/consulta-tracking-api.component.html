<app-operativa-header tituloPantalla="{{'T.Api' | translate}}"></app-operativa-header>
<div id="trakingPagos" class="panel panel-default col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <br>

    <!-- --- Tabla de Pagos y Montos recibidos --- -->
    <div class="card mt-3">
        <div class="card-body">
            <div class="rowTi">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <table class="table table-striped table-hover">
                        <caption></caption>
                    <thead>
                        <tr>
                        <th scope="col" class="text-center3">{{'T.PR' | translate}}</th> <!-- Constante debe cambiar en la referencia al es.json -->
                        <th scope="col" class="text-center3">{{'T.MR' | translate}}</th> <!-- Constante debe cambiar en la referencia al es.json -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-center3">{{title?.totalPagos}}</td>
                            <td class="text-center3">{{title?.totalMontos | currency}}</td>
                        </tr>
                        <ng-template #noHayInformación>
                            <tr>
                                <td class="text-center" colspan="6"> {{'administracion.productos.periodo.Nodata' | translate}} </td>
                            </tr>
                        </ng-template>
                    </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- --- Tabla de estatus Izquierda --- -->
    <div class="divide2">
        <div class="row">
            <table class="table table-striped table-hover">
                <caption></caption>
                <thead>
                    <tr>
                    <th scope="col" class="text-center">{{'EAPI' | translate}}</th> <!-- Constante debe cambiar en la referencia al es.json -->
                    <th scope="col" class="text-center">{{'TT' | translate}}</th> <!-- Constante debe cambiar en la referencia al es.json -->
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let dato of content">
                        <td class="text-center">{{dato.estatus}}</td>
                        <td class="text-center">{{dato.total}}</td>
                    </tr>
                    <ng-template #noHayInformación>
                        <tr>
                            <td class="text-center" colspan="6"> {{'administracion.productos.periodo.Nodata' | translate}} </td>
                        </tr>
                    </ng-template>
                </tbody>
            </table>
        </div>
        <div *ngIf="isData" class="row2">
            <div  width="200px" height="200px">
                <canvas  id="MyChart2">{{ chart2 }}</canvas>
            </div>
        </div>
    </div>
    <!-- --- Seccion de Busqueda --- -->
    <div class="card">
        <h5 class="card-header justify-content-center"> {{'BNG'| translate}} </h5>
        <div class="card-body">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <form [formGroup]="formSearch" class="dis">
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-1">
                        <label for="operacion" class="col-form-label">{{'PO'| translate}}</label>
                    </div>
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 estilo">
                        <select formControlName="operacion" aria-label="operacion" id="operacion" class="form-control form-control-sm" appInputMask="operacionTrakin">
                          <option value="">{{'todos' | translate}}</option>
                          <option  *ngFor="let operacion of catalogoProductos" [value]="operacion.id"> {{operacion.descripcion}} </option>
                        </select>
                    </div>

                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-1">
                        <label for="tipoPago" class="col-form-label">{{'MO.TP'| translate}}</label>
                    </div>
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 estilo">
                        <select formControlName="tipoPago" aria-label="tipoPago" id="tipoPago" class="form-control form-control-sm" appInputMask="tipoPagoTrakin">
                          <option value="">{{'todos' | translate}}</option>
                          <option  *ngFor="let tiposPago of catalogoTipoPago" [value]="tiposPago.id"> {{tiposPago.descripcion}} </option>
                        </select>
                    </div>

                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-1">
                        <label for="divisa" class="col-form-label">{{'divisa'| translate}}</label>
                    </div>
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 estilo">
                        <select formControlName="divisa" aria-label="divisa" id="divisa" class="form-control form-control-sm" appInputMask="divisaTrakin">
                          <option value="">{{'todos' | translate}}</option>
                          <option  *ngFor="let divisa of catalogoDivisa" [value]="divisa.id"> {{divisa.descripcion}} </option>
                        </select>
                    </div>

                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-1">
                        <button type="button" class="btn btn-outline-primary" (click)="buscar()">{{'btn.buscar' | translate}}</button>
                        <button type="button" class="btn btn-outline-primary" (click)="Limpiar()">{{'btn.limpiar' | translate}}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Tabla de estatus Izquierda  -->


        <div class="card mt-3">
            <div class="card-body">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <table class="table table-striped table-hover">
                            <caption></caption>
                            <thead>
                                <tr>
                                    <th scope="col"  rowspan="4" class="text-center">{{'PO' | translate}}</th>
                                    <th scope="col" class="text-center">{{'divisa' | translate}}</th>
                                    <th scope="col" class="text-center">{{'MO.TOS' | translate}}</th>
                                    <th scope="col" class="text-center">{{'estatus' | translate}}</th>

                                </tr>
                            </thead>

                            <tbody>
                                <ng-container *ngIf="banderaHasRows; then templateFillTable; else templateEmptyTableApi">
                                </ng-container>
                                <ng-template #templateFillTable>
                                    <tr *ngFor="let dato of datos">
                                      <td class="text-center">
                                          <a class="color" (click)="archivo(dato.operacion)">{{dato.operacion}}</a>
                                      </td>
                                      <td class="text-center">{{dato.divisa}}</td>
                                      <td class="text-center">{{dato.total}}</td>
                                      <td class="text-center">{{dato.estatus}}</td>
                                    </tr>
                                </ng-template>
                                <ng-template #templateEmptyTableApi>
                                    <tr>
                                        <td class="text-center" colspan="12">{{'administracion.productos.periodo.Nodata' | translate}}</td> <!-- En caso de no retornar info en la request -->
                                    </tr>
                                </ng-template>
                            </tbody>
                        </table>
                    </div>
            </div>
            <div class="rot">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-1">
                    <div class="d-flex justify-content-center" *ngIf="banderaHasRows">
                        <pagination [boundaryLinks]="showBoundaryLinksArchivo"
                            [directionLinks]="showDirectionLinksArchivo"
                            [totalItems]="totalElements"
                            [itemsPerPage]="rowsPorPagina"
                            [maxSize]="rowsPorPagina"
                            [(ngModel)]="page" previousText="&lsaquo;" nextText="&rsaquo;"
                            firstText="{{'paginador.inicio' | translate}}"
                            lastText="{{'paginador.fin' | translate}}"
                            (pageChanged)="onPageChanged($event)">
                        </pagination>

                    </div>
                </div>
            </div>
        </div>

        <div class="rof mt-2">
            <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">
                <button type="button" class="btn btn-danger" (click)="refrescar()">{{'menu.monitoreo.comprobantesFormatoCDMX.btn.refrescar' | translate}}</button>
            </div>
        </div>
        <div class="rof mt-2">
            <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 offset-xs-1 offset-sm-1 offset-md-1 offset-lg-1">

            </div>
        </div>
</div>
